{"version":3,"file":"static/js/808.4206a8a8.chunk.js","mappings":"kNAQMA,EAAe,CACnBC,KAAM,GACNC,MAAO,GACPC,MAAO,GACPC,QAAS,GACTC,MAAM,EACNC,SAAU,GACVC,SAAU,GACVC,SAAU,GACVC,OAAQ,IAuGV,UApGoB,WAClB,OAA4BC,EAAAA,EAAAA,UAASV,GAArC,eAAOW,EAAP,KAAeC,EAAf,KACA,GAA8BF,EAAAA,EAAAA,WAAS,GAAvC,eAAOG,EAAP,KAAgBC,EAAhB,KACA,GAAwCJ,EAAAA,EAAAA,UAAS,IAAjD,eAAOK,EAAP,KAAqBC,EAArB,KACA,GAAgCN,EAAAA,EAAAA,UAAS,IAAzC,eAAOO,EAAP,KAAiBC,EAAjB,KAEQC,GAASC,EAAAA,EAAAA,KAAY,SAACC,GAAD,iBAAiBA,MAAtCF,KAEFG,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,WACR,GAAkB,UAAdP,EAAKQ,WAEF,GAAkB,YAAdR,EAAKQ,KAMd,OAFAL,EAAS,CAAEM,KAAM,SAAUC,QAAS,YACpCL,EAAS,YAGV,CAACL,IAEJ,IAAMW,EAAa,4DAoDnB,OACE,+BACE,gBAAKC,UAAU,kBAAf,UACE,gBAAKA,UAAU,MAAf,UACE,gBAAKA,UAAU,MAAf,UACE,SAAC,KAAD,WACE,SAAC,KAAD,CACEpB,OAAQA,EACRqB,cA1DQ,SAACC,GAErB,GADAA,EAAEC,kBACGJ,EAAWK,KAAKxB,EAAOT,OAC1B,OAAOkC,EAAAA,GAAAA,MAAY,8BAGrB,GADAC,QAAQC,MAAM3B,IACTA,EAAOV,OAASU,EAAOR,QAAUQ,EAAOP,UAAYO,EAAOF,OAC9D,OAAO2B,EAAAA,GAAAA,MAAY,2BAErBtB,GAAW,GACX,IAAIe,EAAU,CACZlB,OAAAA,EACAM,SAAAA,EACAF,aAAAA,IAEFwB,EAAAA,EAAAA,IAAepB,EAAKqB,MAAOX,GACxBY,MAAK,SAACC,GACL5B,GAAW,GACXsB,EAAAA,GAAAA,QAAc,iBAGfO,OAAM,SAACC,GAEN,GADA9B,GAAW,GAEqB,cAA9B8B,EAAIC,SAASC,KAAKC,UACY,IAA9BH,EAAIC,SAASC,KAAKC,QAElB,OAAOX,EAAAA,GAAAA,MAAA,0BACcY,OAAOC,KACxBL,EAAIC,SAASC,KAAKF,KAFf,qBAOTP,QAAQa,IAAIN,EAAIC,SAASC,MACzBV,EAAAA,GAAAA,MAAYQ,EAAIC,SAASC,KAAKF,IAAK,CACjCO,SAAU,YACVC,UAAW,IACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAUC,QAiBJC,aAZO,SAAC1B,GACpBrB,GAAU,kBAAKD,GAAN,cAAesB,EAAE2B,OAAO3D,KAAOgC,EAAE2B,OAAOC,UAYrChD,QAASA,EACTD,UAAWA,EACXI,gBAAiBA,EACjBE,YAAaA,EACbD,SAAUA","sources":["pages/admin/AddCustomer.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { toast } from 'react-toastify'\r\nimport { createCustomer } from '../../api/customer'\r\nimport { UserNav } from '../../components'\r\nimport { FormContainer, MemberAddForm } from '../../components'\r\n\r\nconst intitalState = {\r\n  name: '',\r\n  phone: '',\r\n  gymId: '',\r\n  address: '',\r\n  paid: false,\r\n  joinDate: '',\r\n  planName: '',\r\n  validity: '',\r\n  active: '',\r\n}\r\n\r\nconst AddCustomer = () => {\r\n  const [values, setValues] = useState(intitalState)\r\n  const [loading, setLoading] = useState(false)\r\n  const [planDuration, setPlanDuration] = useState('')\r\n  const [planType, setPlanType] = useState('')\r\n\r\n  const { user } = useSelector((state) => ({ ...state }))\r\n\r\n  const dispatch = useDispatch()\r\n  const navigate = useNavigate()\r\n\r\n  useEffect(() => {\r\n    if (user.role === 'admin') {\r\n      // toast.success('Welcome  Admin Dashboard')\r\n    } else if (user.role === 'manager') {\r\n      // toast.success('Welcome  Manager ')\r\n    } else {\r\n      // toast.error('You are not authorized to access this page')\r\n      dispatch({ type: 'LOGOUT', payload: null })\r\n      navigate('/login')\r\n      return\r\n    }\r\n  }, [user])\r\n\r\n  const phoneRegex = /^[\\+]?[(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}$/\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault()\r\n    if (!phoneRegex.test(values.phone)) {\r\n      return toast.error('Enter a Valid Phone Number')\r\n    }\r\n    console.table(values)\r\n    if (!values.name || !values.gymId || !values.address || !values.active) {\r\n      return toast.error('All are Required Fields')\r\n    }\r\n    setLoading(true)\r\n    var payload = {\r\n      values,\r\n      planType,\r\n      planDuration,\r\n    }\r\n    createCustomer(user.token, payload)\r\n      .then((res) => {\r\n        setLoading(false)\r\n        toast.success('User Added')\r\n        // setValues('')\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false)\r\n        if (\r\n          err.response.data.dbError !== 'undefined' &&\r\n          err.response.data.dbError === true\r\n        ) {\r\n          return toast.error(\r\n            `User with this  ${Object.keys(\r\n              err.response.data.err\r\n            )}  already exists`\r\n          )\r\n        }\r\n\r\n        console.log(err.response.data)\r\n        toast.error(err.response.data.err, {\r\n          position: 'top-right',\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        })\r\n      })\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    setValues({ ...values, [e.target.name]: e.target.value })\r\n  }\r\n  return (\r\n    <>\r\n      <div className='container-fluid'>\r\n        <div className='row'>\r\n          <div className='col'>\r\n            <FormContainer>\r\n              <MemberAddForm\r\n                values={values}\r\n                submitHandler={submitHandler}\r\n                handleChange={handleChange}\r\n                loading={loading}\r\n                setValues={setValues}\r\n                setPlanDuration={setPlanDuration}\r\n                setPlanType={setPlanType}\r\n                planType={planType}\r\n              />\r\n            </FormContainer>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default AddCustomer\r\n"],"names":["intitalState","name","phone","gymId","address","paid","joinDate","planName","validity","active","useState","values","setValues","loading","setLoading","planDuration","setPlanDuration","planType","setPlanType","user","useSelector","state","dispatch","useDispatch","navigate","useNavigate","useEffect","role","type","payload","phoneRegex","className","submitHandler","e","preventDefault","test","toast","console","table","createCustomer","token","then","res","catch","err","response","data","dbError","Object","keys","log","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","handleChange","target","value"],"sourceRoot":""}