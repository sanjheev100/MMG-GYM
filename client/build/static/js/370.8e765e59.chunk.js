"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[370],{8370:function(e,r,t){t.r(r),t.d(r,{default:function(){return j}});var n=t(1413),s=t(9439),a=t(148),o=t(2791),i=t(6030),c=t(6871),u=t(577),l=t(5861),d=t(7757),h=t.n(d),p=t(4569),f=t.n(p),m=function(){var e=(0,l.Z)(h().mark((function e(r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().get("".concat("http://localhost:8000/api","/getAllDBUsers"),{headers:{authtoken:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),g=function(){var e=(0,l.Z)(h().mark((function e(r,t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().put("".concat("http://localhost:8000/api","/updateManager"),{payload:t},{headers:{authtoken:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),x=function(){var e=(0,l.Z)(h().mark((function e(r,t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().delete("".concat("http://localhost:8000/api","/deleteUser/").concat(t),{headers:{authtoken:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),v=t(2794),k=t(184),j=function(){var e=(0,o.useState)([]),r=(0,s.Z)(e,2),t=r[0],l=r[1],d=(0,o.useState)(!0),h=(0,s.Z)(d,2),p=h[0],f=h[1];(0,o.useEffect)((function(){w()}),[]);var j=(0,c.s0)(),y=(0,i.I0)(),b=(0,i.v9)((function(e){return(0,n.Z)({},e)})).user;(0,o.useEffect)((function(){if("admin"===b.role);else if("manager"!==b.role)return y({type:"LOGOUT",payload:null}),void j("/login")}),[b]);var w=function(){f(!0),m(b.token).then((function(e){l(e.data),f(!1)})).catch((function(e){f(!1),u.Am.error(e.response.data.err,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))},C=function(e,r){if("admin"==b.role){var t={id:e,role:r};g(b.token,t).then((function(e){f(!1),u.Am.success("Manager updated successfully"),w()})).catch((function(e){f(!1),u.Am.error(e.response.data.err,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))}else u.Am.error("You are not authorized to access this option")},A=function(e){"admin"==b.role?window.confirm("Are you sure you want to delete this user?")&&(f(!0),x(b.token,e).then((function(e){f(!1),u.Am.success("User Deleted successfully"),w()})).catch((function(e){f(!1),u.Am.error(e.response.data.err,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))):u.Am.error("You are not authorized to access this option")};return(0,k.jsx)("div",{children:(0,k.jsxs)(v.Yb,{children:["Gym Manager",(0,k.jsx)("br",{}),(0,k.jsxs)("div",{children:[(0,k.jsx)("br",{}),t.map((function(e){return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("div",{className:"alert alert-primary",children:[e.name," -- ",e.role,"manager"==e.role?(0,k.jsx)(k.Fragment,{children:p?"":(0,k.jsx)(a.Z,{title:"Remove Manager Rights",children:(0,k.jsx)("span",{className:"float-end mx-2",children:(0,k.jsx)("i",{className:"fa-solid fa-user-check  text-danger","aria-hidden":"true",style:{cursor:"pointer"},onClick:function(){return C(e._id,e.role)}})})})}):(0,k.jsx)(k.Fragment,{children:p?" ":(0,k.jsx)(a.Z,{title:"Add Manager Rights",children:(0,k.jsx)("span",{className:"float-end mx-2",children:(0,k.jsx)("i",{className:"fa-solid fa-user-plus text-success","aria-hidden":"true",style:{cursor:"pointer"},onClick:function(){return C(e._id,e.role)}})})})}),p?"":(0,k.jsx)(a.Z,{title:"Delete This User Permanentely",children:(0,k.jsx)("span",{className:"float-end mx-2",children:(0,k.jsx)("i",{className:"fa fa-trash  text-danger","aria-hidden":"true",style:{cursor:"pointer"},onClick:function(){return A(e._id)}})})})]},e._id)})}))]})]})})}}}]);
//# sourceMappingURL=370.8e765e59.chunk.js.map