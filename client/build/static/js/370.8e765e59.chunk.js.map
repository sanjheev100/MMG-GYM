{"version":3,"file":"static/js/370.8e765e59.chunk.js","mappings":"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","sources":["api/users.js","pages/admin/GymManager.js"],"sourcesContent":["import axios from 'axios'\r\n\r\nexport const getAllDBUsers = async (authtoken) => {\r\n  return await axios.get(`${process.env.REACT_APP_API}/getAllDBUsers`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  })\r\n}\r\n\r\nexport const updateManager = async (authtoken, payload) => {\r\n  return await axios.put(\r\n    `${process.env.REACT_APP_API}/updateManager`,\r\n    { payload },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  )\r\n}\r\n\r\nexport const removeManager = async (authtoken, payload) => {\r\n  return await axios.put(\r\n    `${process.env.REACT_APP_API}/removeManager`,\r\n    { payload },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  )\r\n}\r\n\r\nexport const deleteUser = async (authtoken, id) => {\r\n  return await axios.delete(\r\n    `${process.env.REACT_APP_API}/deleteUser/${id}`,\r\n\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  )\r\n}\r\n","import { Tooltip } from 'antd'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { toast } from 'react-toastify'\r\nimport {\r\n  deleteUser,\r\n  getAllDBUsers,\r\n  removeManager,\r\n  updateManager,\r\n} from '../../api/users'\r\nimport { FormContainer } from '../../components'\r\n\r\nconst GymManager = () => {\r\n  const [users, setUsers] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    loadAllUsers()\r\n  }, [])\r\n\r\n  const navigate = useNavigate()\r\n  const dispatch = useDispatch()\r\n\r\n  const { user } = useSelector((state) => ({ ...state }))\r\n\r\n  useEffect(() => {\r\n    if (user.role === 'admin') {\r\n      // toast.success('Welcome to Admin Dashboard')\r\n    } else if (user.role === 'manager') {\r\n      // toast.success('Welcome to Manager ')\r\n    } else {\r\n      // toast.error('You are not authorized to access this page')\r\n      dispatch({ type: 'LOGOUT', payload: null })\r\n      navigate('/login')\r\n      return\r\n    }\r\n  }, [user])\r\n\r\n  const loadAllUsers = () => {\r\n    setLoading(true)\r\n    getAllDBUsers(user.token)\r\n      .then((res) => {\r\n        setUsers(res.data)\r\n        setLoading(false)\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false)\r\n        toast.error(err.response.data.err, {\r\n          position: 'top-right',\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        })\r\n      })\r\n  }\r\n\r\n  const handleChangeManger = (userId, role) => {\r\n    if (user.role != 'admin') {\r\n      toast.error('You are not authorized to access this option')\r\n      return\r\n    }\r\n    var payload = {\r\n      id: userId,\r\n      role: role,\r\n    }\r\n    updateManager(user.token, payload)\r\n      .then((res) => {\r\n        setLoading(false)\r\n        toast.success('Manager updated successfully')\r\n        loadAllUsers()\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false)\r\n        toast.error(err.response.data.err, {\r\n          position: 'top-right',\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        })\r\n      })\r\n  }\r\n\r\n  const handleDelete = (id) => {\r\n    if (user.role != 'admin') {\r\n      toast.error('You are not authorized to access this option')\r\n      return\r\n    }\r\n    let answer = window.confirm('Are you sure you want to delete this user?')\r\n    if (answer) {\r\n      setLoading(true)\r\n      deleteUser(user.token, id)\r\n        .then((res) => {\r\n          setLoading(false)\r\n          toast.success('User Deleted successfully')\r\n          loadAllUsers()\r\n        })\r\n        .catch((err) => {\r\n          setLoading(false)\r\n          toast.error(err.response.data.err, {\r\n            position: 'top-right',\r\n            autoClose: 5000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n          })\r\n        })\r\n    }\r\n  }\r\n  // updateManager\r\n  return (\r\n    <div>\r\n      <FormContainer>\r\n        Gym Manager\r\n        <br />\r\n        <div>\r\n          <br />\r\n          {users.map((user) => (\r\n            <>\r\n              <div key={user._id} className='alert alert-primary'>\r\n                {user.name} -- {user.role}\r\n                {user.role == 'manager' ? (\r\n                  <>\r\n                    {!loading ? (\r\n                      <Tooltip title='Remove Manager Rights'>\r\n                        <span className='float-end mx-2'>\r\n                          <i\r\n                            className='fa-solid fa-user-check  text-danger'\r\n                            aria-hidden='true'\r\n                            style={{ cursor: 'pointer' }}\r\n                            onClick={() =>\r\n                              handleChangeManger(user._id, user.role)\r\n                            }\r\n                          ></i>\r\n                        </span>\r\n                      </Tooltip>\r\n                    ) : (\r\n                      ''\r\n                    )}\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    {!loading ? (\r\n                      <Tooltip title='Add Manager Rights'>\r\n                        <span className='float-end mx-2'>\r\n                          <i\r\n                            className='fa-solid fa-user-plus text-success'\r\n                            aria-hidden='true'\r\n                            style={{ cursor: 'pointer' }}\r\n                            onClick={() =>\r\n                              handleChangeManger(user._id, user.role)\r\n                            }\r\n                          ></i>\r\n                        </span>\r\n                      </Tooltip>\r\n                    ) : (\r\n                      ' '\r\n                    )}\r\n                  </>\r\n                )}\r\n                {!loading ? (\r\n                  <Tooltip title='Delete This User Permanentely'>\r\n                    <span className='float-end mx-2'>\r\n                      <i\r\n                        className='fa fa-trash  text-danger'\r\n                        aria-hidden='true'\r\n                        style={{ cursor: 'pointer' }}\r\n                        onClick={() => handleDelete(user._id)}\r\n                      ></i>\r\n                    </span>\r\n                  </Tooltip>\r\n                ) : (\r\n                  ''\r\n                )}\r\n              </div>\r\n            </>\r\n          ))}\r\n        </div>\r\n      </FormContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default GymManager\r\n"],"names":["getAllDBUsers","authtoken","axios","process","headers","updateManager","payload","deleteUser","id","useState","users","setUsers","loading","setLoading","useEffect","loadAllUsers","navigate","useNavigate","dispatch","useDispatch","user","useSelector","state","role","type","token","then","res","data","catch","err","toast","response","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","handleChangeManger","userId","handleDelete","window","confirm","map","className","name","title","style","cursor","onClick","_id"],"sourceRoot":""}