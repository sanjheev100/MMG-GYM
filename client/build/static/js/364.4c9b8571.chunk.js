(self.webpackChunkclient=self.webpackChunkclient||[]).push([[364],{6364:function(e,t,n){"use strict";n.r(t);var r=n(9439),o=n(1413),a=n(2791),i=n(4238),c=n(6030),l=n(577),s=n(7022),u=n(3360),f=n(4849),d=n(9743),p=n(9092),y=n(2794),h=n(8472),b=n(2426),m=n.n(b),v=n(6871),g=n(184);t.default=function(){var e=(0,c.v9)((function(e){return(0,o.Z)({},e)})).user,t=(0,a.useState)(0),n=(0,r.Z)(t,2),b=n[0],k=n[1],j=(0,a.useState)(1),w=(0,r.Z)(j,2),x=w[0],C=w[1],O=(0,a.useState)([]),_=(0,r.Z)(O,2),P=_[0],A=_[1],F=(0,a.useState)(!1),S=(0,r.Z)(F,2),E=S[0],R=S[1],N=(0,a.useState)([]),Z=(0,r.Z)(N,2),I=Z[0],D=Z[1],L=(0,a.useState)(!1),M=(0,r.Z)(L,2),T=M[0],U=M[1],V=(0,c.I0)(),B=(0,v.s0)();(0,a.useEffect)((function(){if("admin"===e.role);else if("manager"!==e.role)return V({type:"LOGOUT",payload:null}),void B("/login")}),[e]),(0,a.useEffect)((function(){Y()}),[]),(0,a.useEffect)((function(){G()}),[x]);var G=function(){var t={sort:"gymId",order:"asc",page:x,perPage:10};(0,i.sx)(e.token,t).then((function(e){A(e.data)})).catch((function(e){console.log(e),l.Am.error(e.response.data.err)}))},Y=function(){(0,i.CT)(e.token).then((function(e){k(e.data)})).catch((function(e){console.log(e),l.Am.error(e.response.data.err)}))},H=new Date,J={filename:"PaidCustomers_".concat(m()(H).format("DD-MMM-YYYY"),".csv"),headers:[{label:"Gym ID",key:"gymId"},{label:"Name",key:"name"},{label:"Phone",key:"phone"},{label:"Address",key:"address"},{label:"Paid",key:"paid"},{label:"Join Date",key:"joinDate"},{label:"Validity",key:"validity"},{label:"Active",key:"active"},{label:"Plan Name",key:"planName"}],data:I};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(s.Z,{children:[(0,g.jsx)("h4",{className:"text-center",children:"Paid Customers List"}),(0,g.jsx)("div",{children:(0,g.jsx)("form",{className:"form-inline my-2 my-lg-0",children:(0,g.jsx)("div",{className:"input-group mb-3",style:{display:"flex",flexDirection:"row-reverse",alignItems:"flex-end"},children:E?(0,g.jsxs)(u.Z,{variant:"primary",className:"btn-sm btn-danger mt-3",disabled:!0,style:{top:"-8px",height:"40px"},children:[(0,g.jsx)(f.Z,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"  ","Loading..."]}):(0,g.jsx)(g.Fragment,{children:T?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(u.Z,{className:"btn-raised mt-3",variant:"primary",style:{top:"-8px",height:"40px"},children:(0,g.jsx)(h.CSVLink,(0,o.Z)((0,o.Z)({style:{color:"white"}},J),{},{children:"Download"}))})}):(0,g.jsx)(u.Z,{className:"btn-raised mt-3",variant:"primary",onClick:function(){return R(!0),void(0,i.lK)(e.token).then((function(e){if(!e.data.membersCheck)return U(!1),l.Am.error("No Members Found");D(e.data.members),R(!1),U(!0),l.Am.success("Press Download to download the file")}))},style:{top:"-8px",height:"40px"},children:"Get File"})})})})}),P.length?(0,g.jsx)("div",{children:(0,g.jsxs)("table",{className:"table table-bordered",children:[(0,g.jsx)("thead",{className:"thead-light",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{scope:"col",style:{color:"black"},children:"Gym Id"}),(0,g.jsx)("th",{scope:"col",style:{color:"black"},children:"Name"}),(0,g.jsx)("th",{scope:"col",style:{color:"black"},children:"Phone"}),(0,g.jsx)("th",{scope:"col",style:{color:"black"},children:"Validity"}),(0,g.jsx)("th",{scope:"col",style:{color:"black"},children:"Active"}),(0,g.jsx)("th",{scope:"col",style:{color:"black"},children:"Paid"}),(0,g.jsx)("th",{scope:"col",style:{color:"black"},children:"Edit/Remove"}),(0,g.jsx)("th",{scope:"col",style:{color:"black"},children:"View"})]})}),(0,g.jsx)("tbody",{children:P.map((function(e){return(0,g.jsx)(y.vG,{member:e,loadAllCustomers:G},e._id)}))})]})}):(0,g.jsx)("p",{style:{color:"black"},children:"No Customers Found"})]}),(0,g.jsx)(d.Z,{children:(0,g.jsx)("nav",{className:"col-md-4 offset-md-4 text-center pt-2 p-3",children:(0,g.jsx)(p.Z,{current:x,total:10*Math.ceil(b/10),onChange:function(e){return C(e)}})})})]})}},8472:function(e,t,n){e.exports=n(3561)},8015:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),i=(r=a)&&r.__esModule?r:{default:r},c=n(1509),l=n(8333);var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"buildURI",value:function(){return c.buildURI.apply(void 0,arguments)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=e.headers,r=e.separator,o=e.enclosingCharacter,a=e.uFEFF,i=e.target,c=e.specs,l=e.replace;this.state.page=window.open(this.buildURI(t,a,n,r,o),i,c,l)}},{key:"getWindow",value:function(){return this.state.page}},{key:"render",value:function(){return null}}]),t}(i.default.Component);s.defaultProps=Object.assign(l.defaultProps,{target:"_blank"}),s.propTypes=l.propTypes,t.default=s},9088:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2791),c=(r=i)&&r.__esModule?r:{default:r},l=n(1509),s=n(8333);var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.buildURI=n.buildURI.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"buildURI",value:function(){return l.buildURI.apply(void 0,arguments)}},{key:"handleLegacy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.navigator.msSaveOrOpenBlob){e.preventDefault();var n=this.props,r=n.data,o=n.headers,a=n.separator,i=n.filename,c=n.enclosingCharacter,s=n.uFEFF,u=t&&"function"===typeof r?r():r,f=new Blob([s?"\ufeff":"",(0,l.toCSV)(u,o,a,c)]);return window.navigator.msSaveBlob(f,i),!1}}},{key:"handleAsyncClick",value:function(e){var t=this;this.props.onClick(e,(function(n){!1!==n?t.handleLegacy(e,!0):e.preventDefault()}))}},{key:"handleSyncClick",value:function(e){!1===this.props.onClick(e)?e.preventDefault():this.handleLegacy(e)}},{key:"handleClick",value:function(){var e=this;return function(t){if("function"===typeof e.props.onClick)return e.props.asyncOnClick?e.handleAsyncClick(t):e.handleSyncClick(t);e.handleLegacy(t)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.headers,a=t.separator,i=t.filename,l=t.uFEFF,s=t.children,u=(t.onClick,t.asyncOnClick,t.enclosingCharacter),f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]),d="undefined"===typeof window?"":this.buildURI(n,l,r,a,u);return c.default.createElement("a",o({download:i},f,{ref:function(t){return e.link=t},target:"_self",href:d,onClick:this.handleClick()}),s)}}]),t}(c.default.Component);u.defaultProps=s.defaultProps,u.propTypes=s.propTypes,t.default=u},1509:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=t.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},a=t.isJsons=function(e){return Array.isArray(e)&&e.every((function(e){return"object"===("undefined"===typeof e?"undefined":n(e))&&!(e instanceof Array)}))},i=t.isArrays=function(e){return Array.isArray(e)&&e.every((function(e){return Array.isArray(e)}))},c=t.jsonsHeaders=function(e){return Array.from(e.map((function(e){return Object.keys(e)})).reduce((function(e,t){return new Set([].concat(r(e),r(t)))}),[]))},l=t.jsons2arrays=function(e,t){var n=t=t||c(e),o=t;a(t)&&(n=t.map((function(e){return e.label})),o=t.map((function(e){return e.key})));var i=e.map((function(e){return o.map((function(t){return s(t,e)}))}));return[n].concat(r(i))},s=t.getHeaderValue=function(e,t){var n=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce((function(e,t,n,r){var o=e[t];if(void 0!==o&&null!==o)return o;r.splice(1)}),t);return void 0===n?e in t?t[e]:"":n},u=t.elementOrEmpty=function(e){return"undefined"===typeof e||null===e?"":e},f=t.joiner=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'"';return e.filter((function(e){return e})).map((function(e){return e.map((function(e){return u(e)})).map((function(e){return""+n+e+n})).join(t)})).join("\n")},d=t.arrays2csv=function(e,t,n,o){return f(t?[t].concat(r(e)):e,n,o)},p=t.jsons2csv=function(e,t,n,r){return f(l(e,t),n,r)},y=t.string2csv=function(e,t,n,r){return t?t.join(n)+"\n"+e:e.replace(/"/g,'""')},h=t.toCSV=function(e,t,n,r){if(a(e))return p(e,t,n,r);if(i(e))return d(e,t,n,r);if("string"===typeof e)return y(e,t,n);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')};t.buildURI=function(e,t,n,r,a){var i=h(e,n,r,a),c=o()?"application/csv":"text/csv",l=new Blob([t?"\ufeff":"",i],{type:c}),s="data:"+c+";charset=utf-8,"+(t?"\ufeff":"")+i,u=window.URL||window.webkitURL;return"undefined"===typeof u.createObjectURL?s:u.createObjectURL(l)}},3561:function(e,t,n){"use strict";t.CSVLink=void 0;var r=a(n(8015)),o=a(n(9088));function a(e){return e&&e.__esModule?e:{default:e}}r.default,t.CSVLink=o.default},8333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropsNotForwarded=t.defaultProps=t.propTypes=void 0;var r,o=n(2791),a=((r=o)&&r.__esModule,n(2007));t.propTypes={data:(0,a.oneOfType)([a.string,a.array,a.func]).isRequired,headers:a.array,target:a.string,separator:a.string,filename:a.string,uFEFF:a.bool,onClick:a.func,asyncOnClick:a.bool,enclosingCharacter:a.string},t.defaultProps={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},t.PropsNotForwarded=["data","headers"]}}]);
//# sourceMappingURL=364.4c9b8571.chunk.js.map